{"version":3,"file":"myapp-sdk-1.0.15.min.js","sources":["../src/index.js"],"sourcesContent":["// Basit varsayılan görseller (tema farkını göstermek için inline SVG)\nconst LIGHT_IMAGE_DATA = 'https://genel-amacli-kova.s3.eu-north-1.amazonaws.com/bnpl_light.webp';\nconst DARK_IMAGE_DATA  = 'https://genel-amacli-kova.s3.eu-north-1.amazonaws.com/bnpl_dark.webp';\n\n// Bazı varsayılanlar\nconst DEFAULTS = {\n  targetId: 'myAppWrapper',\n  theme: 'dark', // 'light' | 'dark'\n  linkHref: 'https://www.bumper.co/',\n  images: {\n    light: LIGHT_IMAGE_DATA,\n    dark: DARK_IMAGE_DATA\n  }\n};\n\n// Build helper: iframe’in içeriğini oluşturur\nfunction buildIframeHTML(theme, href, imgSrc) {\n  const bg = theme === 'dark' ? 'transparent' : 'transparent';\n  const color = theme === 'dark' ? '#eee' : '#111';\n  return `<!doctype html>\n<html>\n<head>\n  <meta charset=\"utf-8\">\n  <style>\n    html,body{margin:0;padding:0;background:${bg};color:${color};}\n    .wrap{display:flex}\n    a{display:inline-block;text-decoration:none;outline:none;}\n    img{display:block;max-width:100%;height:auto;}\n  </style>\n</head>\n<body>\n  <div class=\"wrap\">\n    <a href=\"${href}\" target=\"_blank\" rel=\"noopener noreferrer\">\n      <img src=\"${imgSrc}\" alt=\"MyApp\">\n    </a>\n  </div>\n</body>\n</html>`;\n}\n\n// DOM hazır değilse beklemek için\nfunction onReady(cb) {\n  if (document.readyState === 'loading') {\n    document.addEventListener('DOMContentLoaded', cb, { once: true });\n  } else {\n    cb();\n  }\n}\n\n// SDK_VERSION yoksa fallback\nconst __SDK_VERSION__ = typeof SDK_VERSION !== 'undefined' ? SDK_VERSION : '1.0.0';\n\nconst SDK = {\n  version: __SDK_VERSION__,\n\n  init(options = {}) {\n    const cfg = {\n      ...DEFAULTS,\n      ...options,\n      images: { ...DEFAULTS.images, ...(options.images || {}) }\n    };\n\n    const theme = cfg.theme === 'dark' ? 'dark' : 'light';\n    const desiredId = cfg.targetId || DEFAULTS.targetId;\n\n    const run = () => {\n      let container = document.getElementById(desiredId);\n\n      if (!container) {\n        // Belirtilen id yoksa myAppWrapper’a düş\n        if (desiredId !== DEFAULTS.targetId) {\n          console.warn(`[MyApp SDK] targetId=\"${desiredId}\" bulunamadı. \"${DEFAULTS.targetId}\" oluşturuluyor.`);\n        }\n        container = document.getElementById(DEFAULTS.targetId);\n        if (!container) {\n          container = document.createElement('div');\n          container.id = DEFAULTS.targetId;\n          document.body.appendChild(container);\n        }\n      }\n\n      // Önceki içeriği temizle\n      container.innerHTML = '';\n\n      // iframe oluştur\n      const iframe = document.createElement('iframe');\n      iframe.title = 'MyApp Widget';\n      iframe.setAttribute('aria-label', 'MyApp Widget');\n      iframe.style.border = '0';\n      iframe.style.width = '320px';\n      iframe.style.display = 'block';\n      iframe.style.height = '100px'; // ilk yükseklik; load sonrası ayarlanacak\n      // Linkin yeni sekmede açılabilmesi için sandbox'ı gevşetiyoruz (isteğe bağlı)\n      iframe.setAttribute('sandbox', 'allow-scripts allow-same-origin allow-popups allow-popups-to-escape-sandbox');\n\n\n      const imgSrc = (cfg.images && cfg.images[theme]) || DEFAULTS.images[theme];\n      iframe.srcdoc = buildIframeHTML(theme, cfg.linkHref, imgSrc);\n\n      iframe.addEventListener('load', () => {\n        try {\n          const doc = iframe.contentDocument;\n          if (doc && doc.body) {\n            const h = doc.body.scrollHeight;\n            iframe.style.height = Math.max(60, Math.min(h, 600)) + 'px';\n          }\n        } catch (_) {\n          // srcdoc olduğu için normalde buraya düşmez\n        }\n      });\n\n      container.appendChild(iframe);\n\n      console.log(`MyApp SDK v${__SDK_VERSION__} initialized`, {\n        targetId: container.id,\n        theme\n      });\n    };\n\n    onReady(run);\n  }\n};\n\nexport default SDK;"],"names":["DEFAULTS","targetId","theme","linkHref","images","light","dark","__SDK_VERSION__","version","init","options","cfg","desiredId","cb","container","document","getElementById","console","warn","createElement","id","body","appendChild","innerHTML","iframe","title","setAttribute","style","border","width","display","height","imgSrc","srcdoc","href","buildIframeHTML","addEventListener","doc","contentDocument","h","scrollHeight","Math","max","min","_","log","readyState","once"],"mappings":";qCACA,MAIMA,EAAW,CACfC,SAAU,eACVC,MAAO,OACPC,SAAU,yBACVC,OAAQ,CACNC,MATqB,wEAUrBC,KATqB,yEAgDzB,MAAMC,EAAuD,eAEjD,CACVC,QAASD,EAET,IAAAE,CAAKC,EAAU,IACb,MAAMC,EAAM,IACPX,KACAU,EACHN,OAAQ,IAAKJ,EAASI,UAAYM,EAAQN,QAAU,KAGhDF,EAAsB,SAAdS,EAAIT,MAAmB,OAAS,QACxCU,EAAYD,EAAIV,UAAYD,EAASC,SAtB/C,IAAiBY,IAwBD,KACV,IAAIC,EAAYC,SAASC,eAAeJ,GAEnCE,IAECF,IAAcZ,EAASC,UACzBgB,QAAQC,KAAK,yBAAyBN,mBAA2BZ,EAASC,4BAE5Ea,EAAYC,SAASC,eAAehB,EAASC,UACxCa,IACHA,EAAYC,SAASI,cAAc,OACnCL,EAAUM,GAAKpB,EAASC,SACxBc,SAASM,KAAKC,YAAYR,KAK9BA,EAAUS,UAAY,GAGtB,MAAMC,EAAST,SAASI,cAAc,UACtCK,EAAOC,MAAQ,eACfD,EAAOE,aAAa,aAAc,gBAClCF,EAAOG,MAAMC,OAAS,IACtBJ,EAAOG,MAAME,MAAQ,QACrBL,EAAOG,MAAMG,QAAU,QACvBN,EAAOG,MAAMI,OAAS,QAEtBP,EAAOE,aAAa,UAAW,+EAG/B,MAAMM,EAAUrB,EAAIP,QAAUO,EAAIP,OAAOF,IAAWF,EAASI,OAAOF,GACpEsB,EAAOS,OAjFb,SAAyB/B,EAAOgC,EAAMF,GAGpC,MAAO,uIADiB,SAAV9B,EAAmB,OAAS,0NAc7BgC,kEACGF,uDAKlB,CA2DsBG,CAAgBjC,EAAOS,EAAIR,SAAU6B,GAErDR,EAAOY,iBAAiB,OAAQ,KAC9B,IACE,MAAMC,EAAMb,EAAOc,gBACnB,GAAID,GAAOA,EAAIhB,KAAM,CACnB,MAAMkB,EAAIF,EAAIhB,KAAKmB,aACnBhB,EAAOG,MAAMI,OAASU,KAAKC,IAAI,GAAID,KAAKE,IAAIJ,EAAG,MAAQ,IACzD,CACF,CAAE,MAAOK,GAET,IAGF9B,EAAUQ,YAAYE,GAEtBP,QAAQ4B,IAAI,cAActC,gBAA+B,CACvDN,SAAUa,EAAUM,GACpBlB,WAzEsB,YAAxBa,SAAS+B,WACX/B,SAASqB,iBAAiB,mBAAoBvB,EAAI,CAAEkC,MAAM,IAE1DlC,GA2EF"}